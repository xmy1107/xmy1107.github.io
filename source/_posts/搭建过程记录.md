---
title: Hello World
---
[hexo官方文档](https://hexo.io/zh-cn/docs/)

以下是自己的搭建过程：

### 1. 建立名为 **username.github.io**的储存库

### 2. first commit

```bash
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~$ mkdir blog
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~$ cd blog
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ hexo init
INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.git
INFO  Install dependencies
INFO  Start blogging with Hexo!
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$  git push -u origin main
fatal: 不是 git 仓库（或者直至挂载点 / 的任何父目录）
停止在文件系统边界（未设置 GIT_DISCOVERY_ACROSS_FILESYSTEM）。
```

完全按hexo步骤来会在这步卡住，因为git仓库都没有初始化

```bash
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ echo "# xmy1107.github.io" >> README.md
（这里漏了git init，这个记得输入）
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git add README.md
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git commit -m "first commit"
[main （根提交） 8956e78] first commit
 1 file changed, 1 insertion(+)
 create mode 100644 README.md
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git remote add origin https://github.com/xmy1107/xmy1107.github.io.git
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git push -u origin main
Username for 'https://github.com': xmy1107
Password for 'https://xmy1107@github.com': 
```

这里初始化并进行第一次提交以后就建站成功了。注意password不是你用户的密码，而是personal access token。如果是ssh连接就是这样（我用PAT能登进去，但每次都要重新输入，但用ssh在把公钥放进去以后不用这样，就用ssh了）：

```bash
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git remote get-url origin
https://github.com/xmy1107/xmy1107.github.io.git
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git remote set-url origin git@github.com:xmy1107/xmy1107.github.io.git
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git remote get-url origin
git@github.com:xmy1107/xmy1107.github.io.git
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git push -u origin main
枚举对象中: 3, 完成.
对象计数中: 100% (3/3), 完成.
写入对象中: 100% (3/3), 227 字节 | 227.00 KiB/s, 完成.
总共 3（差异 0），复用 0（差异 0），包复用 0
To github.com:xmy1107/xmy1107.github.io.git
 * [new branch]      main -> main
分支 'main' 设置为跟踪 'origin/main'。
```

然后在**https://xmy1107.github.io/**下就有一个空的网页：

![image-20240925132827002](/home/xmy/.config/Typora/typora-user-images/image-20240925132827002.png)

ps：PAT想要不每次输密码可以尝试

`vim ~/.gitconfig`后输入以下内容（虽然我没成功）

```
[init]
        defaultBranch = main
[user]
        name = 
        email = 
[github]
        token = 
```



### 3. 网站正式建立

上面是因为只push了一个README，下面对github工作流配置后再次push可以得到”正常“的一个网页

1. 使用 `node --version` 指令检查你电脑上的 Node.js 版本。 记下主要版本（我是`v20.17.0`）

2. 在储存库中前往 **Settings** > **Pages** > **Source** 。 将 source 更改为 **GitHub Actions**，然后保存。

3. 在储存库中建立 `.github/workflows/pages.yml`，并填入以下内容 (将 `20` 替换为上个步骤中记下的版本)：

```yaml
.github/workflows/pages.ymlname: Pages

on:
  push:
    branches:
      - main # default branch

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          # If your repository depends on submodule, please see: https://github.com/actions/checkout
          submodules: recursive
      - name: Use Node.js 20
        uses: actions/setup-node@v4
        with:
          # Examples: 20, 18.19, >=16.20.2, lts/Iron, lts/Hydrogen, *, latest, current, node
          # Ref: https://github.com/actions/setup-node#supported-version-syntax
          node-version: "20"
      - name: Cache NPM dependencies
        uses: actions/cache@v4
        with:
          path: node_modules
          key: ${{ runner.OS }}-npm-cache
          restore-keys: |
            ${{ runner.OS }}-npm-cache
      - name: Install Dependencies
        run: npm install
      - name: Build
        run: npm run build
      - name: Upload Pages artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./public
  deploy:
    needs: build
    permissions:
      pages: write
      id-token: write
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

这个过程相当于`hexo generate`和`hexo deploy`，区别是在`git push`时才执行，然后用github工作流完成渲染和部署。

这一步结束后重新打开**https://xmy1107.github.io/**便是如下页面：

![image-20240925134647445](/home/xmy/.config/Typora/typora-user-images/image-20240925134647445.png)

### 4.项目页面(出问题了，这个跳过)

1. 导航到 GitHub 上的存储库。 转到 **Settings** 选项卡。 建立名为 `<repository 的名字>` 的储存库，这样你的博客网址为 `<你的 GitHub 用户名>.github.io/<repository 的名字>`，repository 的名字可以任意，例如 blog 或 hexo。
2. 编辑你的 `_config.yml`，将 `url:` 更改为 `<你的 GitHub 用户名>.github.io/<repository 的名字>`。
3. 在 GitHub 仓库的设置中，导航至 **Settings** > **Pages** > **Source** 。 将 source 更改为 **GitHub Actions**，然后保存。
4. Commit 并 push 到默认分支上。

注意这里要修改远程的仓库，需要push到新建的那个仓库中

```bash
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git remote set-url origin git@github.com:xmy1107/blog.git
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git remote -v
origin	git@github.com:xmy1107/blog.git (fetch)
origin	git@github.com:xmy1107/blog.git (push)
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git add .
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git status
位于分支 main
您的分支与上游分支 'origin/main' 一致。

要提交的变更：
  （使用 "git restore --staged <文件>..." 以取消暂存）
	修改：     _config.yml

(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git commit -m "first commit"
[main fa6cdc7] first commit
 1 file changed, 1 insertion(+), 1 deletion(-)
(base) xmy@xmy-Z790M-AORUS-ELITE-AX:~/blog$ git push
枚举对象中: 30, 完成.
对象计数中: 100% (30/30), 完成.
使用 16 个线程进行压缩
压缩对象中: 100% (19/19), 完成.
写入对象中: 100% (30/30), 31.32 KiB | 3.48 MiB/s, 完成.
总共 30（差异 3），复用 0（差异 0），包复用 0
remote: Resolving deltas: 100% (3/3), done.
To github.com:xmy1107/blog.git
 * [new branch]      main -> main
```

5. 部署完成后，前往 *username*.github.io/*repository* 查看网页。

### 5.一键部署

1. 安装 [hexo-deployer-git](https://github.com/hexojs/hexo-deployer-git)，即输入`npm install hexo-deployer-git --save`
2. 在 `_config.yml` 中添加以下配置（如果配置已经存在，请将其替换为如下）:

```
deploy:
  type: git
  repo: https://github.com/<username>/<project>
  # example, https://github.com/hexojs/hexojs.github.io
  # 我这里是git@github.com:xmy1107/xmy1107.github.io.git，因为我是ssh连接的
  # git@github.com:xmy1107/blog.git是项目页面
  branch: main # hexo给的是gh-pages
```

3. 执行 `hexo clean && hexo deploy` 。
4. 浏览 *username*.github.io，检查你的网站能否运作。
