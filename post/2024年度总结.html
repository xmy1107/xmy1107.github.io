<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="icon" href="/favicon.ico">
    <script type="module" crossorigin src="/static/js/120aa8f8.js"></script>
    <link rel="stylesheet" href="/static/css/a14e1a22.css">
    <!-- å¼•å…¥ KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"></script>
    <!-- å¼•å…¥ marked.js å’Œ DOMPurify åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.0/dist/purify.min.js"></script>
<!-- hexo injector head_end start --><script rel="prefetch" async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script rel="preload" src="https://unpkg.com/blueimp-md5@^2.19.0/js/md5.min.js"></script><script rel="preload" src="https://unpkg.com/lodash@^4.17.21/lodash.min.js"></script><link rel="stylesheet" href="https://fonts.loli.net/css?family=Rubik" /><script rel="preload" src="https://unpkg.com/gitalk@^1.8.0/dist/gitalk.min.js"></script><link rel="stylesheet" href="https://unpkg.com/gitalk@^1.8.0/dist/gitalk.css"/><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="alternate" href="/atom.xml" title="xmy" type="application/atom+xml">
</head>

<body id="body-container">
    <noscript>
        <strong>We're sorry but this app doesn't work properly without JavaScript enabled.
            Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>

    <!-- Aurora æœºå™¨äººèŠå¤©æ¡†ï¼Œå›ºå®šåœ¨é¡µé¢å·¦ä¸‹è§’ -->
    <div id="aurora-chatbox" style="
    position: fixed;
    bottom: 200px;
    left: 20px;
    width: 350px;
    background: linear-gradient(to bottom right, #ffffff, #f1f7ff);
    border: none;
    border-radius: 12px;
    box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.1);
    z-index: 9999;
    font-family: Arial, sans-serif;
    overflow: hidden;">
    <!-- æ ‡é¢˜æ  -->
    <!-- <div style="
        background-color: #007bff;
        color: #ffffff;
        padding: 10px 15px;
        font-size: 16px;
        font-weight: bold;
        border-top-left-radius: 12px;
        border-top-right-radius: 12px;
        text-align: center;">
        Aurora èŠå¤©æœºå™¨äºº
    </div> -->
    <!-- èŠå¤©æ¡†ä¸»ä½“ -->
    <div style="
        padding: 15px;
        display: flex;
        flex-direction: column;">
        <p style="margin: 0; font-size: 14px; color: #333; margin-bottom: 8px;">
            å’Œæˆ‘èŠå¤©å§ğŸ¤–
        </p>
        <input type="text" id="userInput" placeholder="è¾“å…¥ä½ çš„é—®é¢˜..."
            style="
                width: calc(100% - 10px);
                padding: 8px;
                margin: 0 auto;
                border-radius: 8px;
                border: 1px solid #ddd;
                box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
                transition: all 0.3s ease;" />
        <button id="sendMessage" style="
                margin-top: 10px;
                padding: 10px 15px;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 8px;
                font-size: 14px;
                cursor: pointer;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
                transition: background-color 0.3s ease;">
            å‘é€
        </button>
        <div id="responseBox" style="
                margin-top: 15px;
                min-height: 50px;
                font-size: 12px;
                color: #555;
                background: #f9f9f9;
                border-radius: 8px;
                padding: 8px;
                box-shadow: inset 0px 1px 3px rgba(0,0,0,0.05);
                overflow-y: auto;">
            <!-- æœºå™¨äººå“åº”å±•ç¤º -->
        </div>
    </div>
    </div>


    <!-- JavaScript é€»è¾‘ -->
    <script>
        //å¼€å‘è€…å¹³å°ï¼šhttps://platform.moonshot.cn/console/api-keys
        const API_URL = "https://api.moonshot.cn/v1/chat/completions"; // Kimi AIçš„APIåœ°å€
        const API_KEY = "sk-7ZY0XOT24cIgQzar6Sos70L23dCoYkT6SFHAuiCnwVAKkaIK"; // æ›¿æ¢ä¸ºæ‚¨çš„Kimi APIå¯†é’¥
    
        async function sendMessage() {
            const userInput = document.getElementById("userInput").value.trim();
            const responseBox = document.getElementById("responseBox");
    
            if (!userInput) {
                responseBox.innerText = "è¯·è¾“å…¥ä½ çš„é—®é¢˜ï¼";
                return;
            }
    
            responseBox.innerText = "æ€è€ƒä¸­ï¼Œè¯·è€å¿ƒç­‰å€™ï¼ˆéœ€è¦10ç§’å·¦å³ï¼‰...";
    
            try {
                // å‘èµ· Kimi AI API è¯·æ±‚
                const response = await fetch(API_URL, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: "moonshot-v1-8k", // Kimi æ¨¡å‹åç§°
                        messages: [
                            { role: "system", content: "ä½ æ˜¯ä¸€ä¸ªç½‘ç«™çš„åŠ©æ‰‹ï¼Œä¸‹é¢æˆ‘ä¼šç»™ä½ ä¸€äº›è¿™ä¸ªç½‘ç«™çš„ç›¸å…³ä¿¡æ¯ã€‚\
                            \nç½‘ç«™çš„ä¸»äººå«è™šåç¾Šï¼Œç½‘ç«™æ˜¯ç”¨hexoæ­å»ºçš„ï¼Œç½‘ç«™é“¾æ¥æ˜¯https://xmy1107.github.io/ï¼Œ\
                            å†…å®¹ä»¥æŠ€æœ¯å’Œç”Ÿæ´»ä¸ºä¸»ã€‚" },
                            { role: "user", content: userInput }
                        ]
                    })
                });
    
                if (!response.ok) {
                    throw new Error("API è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–å¯†é’¥ã€‚");
                }
    
                const data = await response.json();
                const kimiResponse = data.choices[0]?.message?.content || "æœªè·å–åˆ°æœ‰æ•ˆå“åº”å†…å®¹ã€‚";
                console.log("Kimi Response:", kimiResponse);
    
                // æ¸²æŸ“å¤„ç†ä¸æ•°å­¦å…¬å¼å±•ç¤º
                const placeholder = '%%MATH_FORMULA%%';
                let mathBlocks = [];
    
                // é¢„å¤„ç†æ•°å­¦å…¬å¼
                const preprocessedResponse = kimiResponse.replace(/\\\[.*?\\\]|\\\(.*?\\\)/gs, (match) => {
                    mathBlocks.push(match);
                    return placeholder;
                });
    
                // ä½¿ç”¨ marked æ¸²æŸ“ Markdown
                const renderedHTML = marked.parse(preprocessedResponse);
    
                // æ›¿æ¢å ä½ç¬¦å›åŸå§‹æ•°å­¦å…¬å¼
                let finalHTML = renderedHTML;
                mathBlocks.forEach((math, i) => {
                    finalHTML = finalHTML.replace(placeholder, math);
                });
    
                // å®‰å…¨æ’å…¥ HTML å¹¶æ¸²æŸ“æ•°å­¦å…¬å¼
                responseBox.innerHTML = DOMPurify.sanitize(finalHTML);
                renderMathInElement(responseBox, {
                    delimiters: [
                        { left: "\\(", right: "\\)", display: false }, // è¡Œå†…å…¬å¼
                        { left: "\\[", right: "\\]", display: true }  // å—çº§å…¬å¼
                    ],
                    throwOnError: false
                });
            } catch (error) {
                responseBox.innerText = "æŠ±æ­‰ï¼Œå‡ºé”™äº†ï¼š" + error.message;
            }
    
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById("userInput").value = "";
        }
    
        // äº‹ä»¶ç›‘å¬ï¼šå‘é€æŒ‰é’®å’Œå›è½¦é”®
        document.getElementById("sendMessage").addEventListener("click", sendMessage);
        document.getElementById("userInput").addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                event.preventDefault();
                sendMessage();
            }
        });
    </script>
    
</body>

</html>